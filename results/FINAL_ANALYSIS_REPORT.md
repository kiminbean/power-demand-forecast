# EVAL-003: 기상변수 효용성 종합 분석 보고서

**실험 일시**: 2025-12-15
**실험 환경**: Apple M1 Pro (MPS), 5 trials, 50 epochs

---

## 1. Executive Summary

### 핵심 발견

1. **가설 부분 검증**: Horizon이 길어질수록 기상변수의 부정적 효과가 감소함
   - h=1 → h=168: Weather Effect가 -7.2% → 0.01%p로 개선 (단, 0.01%p는 노이즈 수준)

2. **기상변수의 일반적 효용성**: 현재 상태에서 기상변수는 **전반적으로 도움이 되지 않음**
   - 모든 horizon에서 R² 성능 저하 (노이즈 추가 효과)

3. **예외적 유효 구간**: **겨울철 수요 급변 구간(변곡점)**에서만 기상변수가 도움됨
   - 겨울철 변곡점: **+2.5% MAPE 개선** (5 trials 평균)

---

## 2. EVAL-003 상세 결과

### 2.1 Horizon별 성능 비교

| Horizon | demand_only MAPE | weather_full MAPE | Weather Effect | R² 변화 |
|---------|------------------|-------------------|----------------|---------|
| **h=1**     | 4.99% ± 0.42 | 5.35% ± 0.23 | **-7.2%** (악화) | -1.3% |
| **h=24**    | 10.34% ± 0.31 | 10.63% ± 0.42 | **-2.8%** (악화) | -3.3% |
| **h=48**    | 11.38% ± 0.23 | 11.46% ± 0.24 | **-0.7%** (미미) | -1.3% |
| **h=168**   | 12.63% ± 0.53 | 12.62% ± 0.49 | **0.01%p** (차이 없음) | -5.3% |

### 2.2 Horizon별 트렌드 분석

```
Weather Effect (MAPE 개선율)
     +1% |
      0% |--------------------------------------●  h=168 (0.01%p, 노이즈)
     -1% |                            ●  h=48 (-0.7%)
     -2% |
     -3% |              ●  h=24 (-2.8%)
     -4% |
     -5% |
     -6% |
     -7% | ●  h=1 (-7.2%)
     -8% |
         +----+----+----+----+----+----+----+----→ Horizon (hours)
              1        24       48            168
```

**해석**: Horizon이 증가함에 따라 기상변수의 부정적 영향이 선형적으로 감소하지만,
h=168에서도 0.01%p 차이로 통계적으로 무의미함 (trial간 std ±0.5% 대비 노이즈 수준).

---

## 3. 변곡점 분석 결과

### 3.1 계절별 변곡점(급변구간) 성능

| 기간 | demand_only MAPE | weather_full MAPE | 개선율 |
|------|------------------|-------------------|--------|
| **여름** | 8.92% | 9.37% | -5.1% (악화) |
| **겨울** | 12.97% | **12.64%** | **+2.5% (개선)** |
| **전환기** | 10.63% | 11.41% | -7.4% (악화) |
| **전체** | 10.25% | 10.73% | -4.6% (악화) |

### 3.2 핵심 인사이트: 겨울철 변곡점

**유일하게 기상변수가 유의미하게 도움되는 구간**

- 겨울철에 급격한 수요 변화가 발생할 때만 기상변수(특히 THI, 온도, 풍속)가 예측 개선에 기여
- 난방 수요와 기상조건의 강한 상관관계가 모델 학습에 반영됨
- 여름/전환기는 lag 변수만으로 충분한 예측 가능

---

## 4. 신호 마스킹 효과 분석

### 4.1 왜 짧은 Horizon에서 기상변수가 해로운가?

```
Signal Strength by Horizon
────────────────────────────────────────────
h=1:   LAG ████████████████████ (corr=0.974)
       WEATHER ██ (corr~0.3)

h=168: LAG ████████ (corr~0.5)
       WEATHER ██ (corr~0.3)
────────────────────────────────────────────
```

1. **h=1**: demand_lag_1 상관계수 0.974로 예측의 대부분을 설명
   - 기상변수(상관계수 ~0.3)는 **노이즈**로 작용
   - 모델이 불필요한 패턴 학습 → 과적합

2. **h=168**: Lag 변수의 예측력 감소 (약 1주일 전 데이터)
   - 기상변수가 상대적으로 유용한 신호가 됨
   - 그러나 여전히 R²는 감소 → 추가 개선 필요

---

## 5. 결론 및 권장사항

### 5.1 결론

| 항목 | 결론 |
|------|------|
| **단기 예측 (h=1~24)** | 기상변수 **제외** 권장. Lag 변수만으로 최적 성능 |
| **장기 예측 (h=168)** | 기상변수 효과 없음 (0.01%p). **제외** 권장 |
| **겨울철 급변 구간** | 기상변수 **포함** 권장. +2.5% 개선 효과 (유일한 예외) |

### 5.2 권장 후속 연구

1. **Feature Selection**: 기상변수 중 유효한 변수만 선별 (THI, 풍속 위주)
2. **Conditional Model**: 계절/변곡점 조건부 모델 앙상블
3. **Architecture**: Attention 메커니즘으로 동적 가중치 학습
4. **외부 요인**: 공휴일, 관광객 데이터 추가 검토

### 5.3 실무 적용 권장

```
if season == "winter" and is_inflection_point:
    use weather_full model  # 겨울철 급변구간만 기상변수 유효
else:
    use demand_only model   # 모든 다른 경우 기상변수 제외
```

---

## 6. 실험 메트릭 요약

### 6.1 전체 실험 통계
- 총 실험 수: 40 (4 horizons × 2 groups × 5 trials)
- 총 학습 epochs: 2,000 (50 epochs × 40 experiments)
- 데이터 샘플: 87,263 (시간별 전력수요)

### 6.2 파일 위치
- 상세 결과: `results/metrics/horizon_comparison.csv`
- 개선율 분석: `results/metrics/horizon_improvements.csv`
- 변곡점 분석: `results/metrics/inflection_point_analysis.csv`
- 시각화: `results/figures/horizon_comparison.png`

---

*Report Generated: 2025-12-15*
*Experiment: EVAL-003 Horizon Comparison*
