#!/usr/bin/env python3
"""
jeju_ferry_crawler.py ê²€ì¦ ë³´ê³ ì„œ
=================================

ê²€ì¦ì¼: 2024-12-15
ê²€ì¦ì: Claude + Gemini í¬ë¡œìŠ¤ ì²´í¬

## ê²€ì¦ ê²°ê³¼: âŒ ë™ì‘í•˜ì§€ ì•ŠìŒ

### 1. ë°ì´í„° ì†ŒìŠ¤ ê²€ì¦

| ì†ŒìŠ¤ | URL/ID | ë™ì‘ ì—¬ë¶€ | ìƒì„¸ |
|------|--------|:---------:|------|
| ê³µê³µë°ì´í„°í¬í„¸ | 15056326 | âš ï¸ | ë°ì´í„° ì¡´ì¬í•˜ë‚˜ ì—°ê°„/í•­ë¡œë³„ (9í–‰) |
| ì œì£¼ë„ì²­ | category=1822 | âŒ | ì¹´í…Œê³ ë¦¬ ID ë³€ê²½ë¨ |
| ê¸°ë³¸ ì¶”ì •ê°’ | 1,500ëª…/ì¼ | âŒ | ì‹¤ì œê°’ ~5,500ëª…ì˜ 27% ìˆ˜ì¤€ |

### 2. ì½”ë“œ êµ¬í˜„ ìƒíƒœ

| í•¨ìˆ˜ | êµ¬í˜„ ìƒíƒœ | ë¹„ê³  |
|------|:---------:|------|
| _fetch_from_data_go_kr() | âŒ return None | ë¯¸êµ¬í˜„ |
| _fetch_from_jeju_gov() | âŒ return None | ë¯¸êµ¬í˜„ |
| _download_yearly_data() | âš ï¸ ë¶ˆì™„ì „ | íŒŒì¼ ë‹¤ìš´ë¡œë“œ ë¡œì§ ì—†ìŒ |
| _estimate_from_monthly() | âš ï¸ ì˜ì¡´ì„± ì‹¤íŒ¨ | ìœ„ í•¨ìˆ˜ë“¤ ì‹¤íŒ¨ ì‹œ ë™ì‘ ì•ˆí•¨ |
| _get_default_estimate() | âœ… ë™ì‘ | í•˜ë“œì½”ë”©ëœ ë¶€ì •í™•í•œ ê°’ ë°˜í™˜ |

### 3. ê³µê³µë°ì´í„°í¬í„¸ 15056326 ì‹¤ì œ ë°ì´í„° êµ¬ì¡°

```
íŒŒì¼ë°ì´í„°ëª…: ì œì£¼íŠ¹ë³„ìì¹˜ë„_ì—¬ê°ì„ ìˆ˜ì†¡ì‹¤ì í˜„í™©_20231231
ì—…ë°ì´íŠ¸ ì£¼ê¸°: ì—°ê°„
ì „ì²´ í–‰: 9ê°œ
í™•ì¥ì: CSV

ì»¬ëŸ¼:
- ì—°ë„ (YYYY)
- í•­ë¡œ (ì œì£¼â†”ì™„ë„, ì œì£¼â†”ìš°ìˆ˜ì˜ ë“±)
- ì„ ë°•ëª…
- ì—¬ê°ì •ì›(ëª…)
- ì—¬ê°ìˆ˜ì†¡ì‹¤ì (ëª…)  â† ì—°ê°„ í•©ê³„
- ì¼ë°˜ ì—¬ê°ìˆ˜ì†¡ì‹¤ì (ëª…)
- ì„¬ì£¼ë¯¼ ì—¬ê°ìˆ˜ì†¡ì‹¤ì (ëª…)
- ì°¨ëŸ‰ëŒ€ìˆ˜ í™”ë¬¼ìˆ˜ì†¡ì‹¤ì 
- í™”ë¬¼í†¤ìˆ˜ í™”ë¬¼ìˆ˜ì†¡ì‹¤ì 
- ë°ì´í„°ê¸°ì¤€ì¼ì
```

### 4. Gemini ë¶„ì„ (ê¸°ë³¸ ì¶”ì •ê°’ ê²€ì¦)

```
ì‹¤ì œ ì œì£¼ ì—¬ê°ì„  ì—°ê°„ ì´ìš©ê°: ~200ë§Œ ëª…
ê³„ì‚°: 2,000,000 Ã· 365 â‰ˆ 5,479ëª…/ì¼

í¬ë¡¤ëŸ¬ ê¸°ë³¸ê°’: 1,500ëª…/ì¼
ì˜¤ì°¨ìœ¨: 72.6% ê³¼ì†Œ ì¶”ì • (ì‹¤ì œê°’ì˜ 27% ìˆ˜ì¤€)
```

### 5. ê²°ë¡ 

ì´ í¬ë¡¤ëŸ¬ëŠ” ì‚¬ì‹¤ìƒ **ë”ë¯¸ ì½”ë“œ**ì…ë‹ˆë‹¤:
1. ì‹¤ì œ ë°ì´í„° ìˆ˜ì§‘ í•¨ìˆ˜ê°€ êµ¬í˜„ë˜ì§€ ì•ŠìŒ
2. ìœ ì¼í•˜ê²Œ ë™ì‘í•˜ëŠ” _get_default_estimate()ëŠ” ë¶€ì •í™•í•œ í•˜ë“œì½”ë”© ê°’
3. ê³µê³µë°ì´í„°í¬í„¸ ë°ì´í„°ëŠ” ì—°ê°„/í•­ë¡œë³„ì´ë¼ ì¼ë³„ ì¶”ì • ë¶ˆê°€ëŠ¥

### 6. ê¶Œì¥ ëŒ€ì•ˆ

Gemini ì œì•ˆ: í•­ê³µ ë°ì´í„° ê¸°ë°˜ ë¹„ìœ¨ ì¶”ì •
```python
# í•´ìš´ ë¶„ë‹´ë¥ : í•­ê³µ ëŒ€ë¹„ ì•½ 5.5%
ferry_passengers = air_passengers * 0.055
```

ì´ ë°©ì‹ì´ í•˜ë“œì½”ë”©(1,500ëª…)ë³´ë‹¤ ì •í™•í•˜ê³ ,
ì„±ìˆ˜ê¸°/ë¹„ìˆ˜ê¸° ë³€ë™ì´ ìì—°ìŠ¤ëŸ½ê²Œ ë°˜ì˜ë¨.
"""

# =============================================================================
# ê²€ì¦ í…ŒìŠ¤íŠ¸ ì½”ë“œ
# =============================================================================

def verify_data_source_15056326():
    """ê³µê³µë°ì´í„°í¬í„¸ 15056326 ë°ì´í„° ê²€ì¦"""
    
    expected = {
        "ë°ì´í„°ëª…": "ì œì£¼íŠ¹ë³„ìì¹˜ë„_ì—¬ê°ì„ ìˆ˜ì†¡ì‹¤ì í˜„í™©",
        "ì „ì²´_í–‰": 9,
        "ì—…ë°ì´íŠ¸_ì£¼ê¸°": "ì—°ê°„",
        "ë°ì´í„°_í˜•íƒœ": "í•­ë¡œë³„ ì—°ê°„ ìˆ˜ì†¡ì‹¤ì ",
        "ì¼ë³„_ë°ì´í„°": False,
    }
    
    print("=" * 60)
    print("ê³µê³µë°ì´í„°í¬í„¸ 15056326 ê²€ì¦ ê²°ê³¼")
    print("=" * 60)
    
    for key, value in expected.items():
        print(f"  {key}: {value}")
    
    print("\nâš ï¸ ê²°ë¡ : ì¼ë³„ ì—¬ê° ìˆ˜ ì¶”ì •ì— ë¶€ì í•© (ì—°ê°„ í•©ê³„ë§Œ ì œê³µ)")
    
    return expected


def verify_default_estimate():
    """ê¸°ë³¸ ì¶”ì •ê°’ ì •í™•ë„ ê²€ì¦"""
    
    # í¬ë¡¤ëŸ¬ì˜ ê¸°ë³¸ê°’
    crawler_estimate = 1500  # ëª…/ì¼
    
    # ì‹¤ì œ í†µê³„ (KOMSA, ì—°ê°„ ~200ë§Œëª…)
    actual_annual = 2_000_000
    actual_daily = actual_annual / 365  # ~5,479ëª…
    
    error_rate = abs(crawler_estimate - actual_daily) / actual_daily * 100
    
    print("\n" + "=" * 60)
    print("ê¸°ë³¸ ì¶”ì •ê°’ ì •í™•ë„ ê²€ì¦")
    print("=" * 60)
    print(f"  í¬ë¡¤ëŸ¬ ê¸°ë³¸ê°’: {crawler_estimate:,}ëª…/ì¼")
    print(f"  ì‹¤ì œ ì¶”ì •ê°’: {actual_daily:,.0f}ëª…/ì¼")
    print(f"  ì˜¤ì°¨ìœ¨: {error_rate:.1f}%")
    print(f"\nâŒ ê²°ë¡ : í¬ë¡¤ëŸ¬ ê¸°ë³¸ê°’ì€ ì‹¤ì œì˜ {crawler_estimate/actual_daily*100:.1f}% ìˆ˜ì¤€ (ê³¼ì†Œì¶”ì •)")
    
    return {
        "crawler": crawler_estimate,
        "actual": actual_daily,
        "error_rate": error_rate,
    }


def verify_implementation_status():
    """ì½”ë“œ êµ¬í˜„ ìƒíƒœ ê²€ì¦"""
    
    functions = {
        "_fetch_from_data_go_kr": ("return None", "âŒ ë¯¸êµ¬í˜„"),
        "_fetch_from_jeju_gov": ("return None", "âŒ ë¯¸êµ¬í˜„"),
        "_download_yearly_data": ("try/except â†’ None", "âš ï¸ ë¶ˆì™„ì „"),
        "_estimate_from_monthly": ("ì˜ì¡´ì„± ì‹¤íŒ¨ ì‹œ None", "âš ï¸ ë¶ˆì™„ì „"),
        "_get_default_estimate": ("í•˜ë“œì½”ë”© ê°’ ë°˜í™˜", "âœ… ë™ì‘ (ë¶€ì •í™•)"),
    }
    
    print("\n" + "=" * 60)
    print("í•¨ìˆ˜ êµ¬í˜„ ìƒíƒœ ê²€ì¦")
    print("=" * 60)
    
    for func, (impl, status) in functions.items():
        print(f"  {status} {func}: {impl}")
    
    print("\nâŒ ê²°ë¡ : 5ê°œ í•¨ìˆ˜ ì¤‘ 4ê°œê°€ ë¯¸êµ¬í˜„ ë˜ëŠ” ë¶ˆì™„ì „")
    
    return functions


if __name__ == "__main__":
    verify_data_source_15056326()
    verify_default_estimate()
    verify_implementation_status()
    
    print("\n" + "=" * 60)
    print("ğŸ“‹ ìµœì¢… íŒì •: jeju_ferry_crawler.py")
    print("=" * 60)
    print("""
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ìƒíƒœ: âŒ ë™ì‘í•˜ì§€ ì•ŠìŒ (ë”ë¯¸ ì½”ë“œ)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ ë°ì´í„° ìˆ˜ì§‘ í•¨ìˆ˜: 4/5 ë¯¸êµ¬í˜„                             â”‚
â”‚  â€¢ ê¸°ë³¸ ì¶”ì •ê°’: ì‹¤ì œì˜ 27% ìˆ˜ì¤€ (73% ê³¼ì†Œì¶”ì •)              â”‚
â”‚  â€¢ ê³µê³µë°ì´í„°: ì—°ê°„/í•­ë¡œë³„ (ì¼ë³„ ì¶”ì • ë¶ˆê°€)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ê¶Œì¥ ëŒ€ì•ˆ: í•­ê³µ ë°ì´í„° Ã— 0.055 (í•´ìš´ ë¶„ë‹´ë¥ )               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    """)
